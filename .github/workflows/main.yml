name: Test DeepSeek di GitHub Actions
on: workflow_dispatch # Biar bisa di-klik tombol "Run" manual

jobs:
  test-thinking-ai:
    runs-on: ubuntu-latest # Ini yang dapet 16GB RAM
    steps:
      - name: Cek Spesifikasi Runner
        run: |
          echo "=== CPU Info ==="
          lscpu | grep 'Model name'
          echo "=== RAM Info ==="
          free -h
          echo "=== Disk Info ==="
          df -h

      - name: Install Ollama
        run: curl -fsSL https://ollama.com/install.sh | sh

      - name: Jalankan Ollama Server
        run: ollama serve &

      - name: Tunggu Server Nyala
        run: sleep 10

      - name: Download & Run DeepSeek-R1 (1.5B)
        # Kita pake 1.5B biar sat-set di CPU. 
        # Kalau mau maksa 7B ganti aja jadi 'deepseek-r1:7b'
        run: |
          echo "Tanya: Kenapa air laut asin? (Tunjukkan cara mikirmu)"
          ollama run deepseek-r1:7b "Jelaskan secara ilmiah kenapa air laut rasanya asin? Gunakan Bahasa Indonesia."
