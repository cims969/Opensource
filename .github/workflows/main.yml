name: Jalanin n8n dengan Public URL
on: 
  workflow_dispatch:

jobs:
  n8n-live:
    runs-on: ubuntu-latest
    steps:
      - name: Run n8n Docker
        run: |
          docker run -d --name n8n -p 5678:5678 -e N8N_SECURE_COOKIE=false n8nio/n8n:latest
          echo "Lagi booting n8n..."
          sleep 10

      - name: Install Localtunnel
        run: npm install -g localtunnel

      - name: Buka Tunnel (Public URL)
        run: |
          echo "Nih URL n8n lu (klik aja):"
          # Ini bakal nahan process biar gak langsung close
          lt --port 5678
